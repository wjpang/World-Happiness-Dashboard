{
    "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
    "title":"World Happiness Score by Country",
    "width":"container",
    "height":600,
    "projection":{
        "type":"equirectangular"
    },
    "params":[
        {
            "name":"Year",
            "value":2020,
            "bind":{
                "input":"range",
                "min":2006,
                "max":2020,
                "step":1
            }
        }
    ],
    "data":{
        "url":"https://raw.githubusercontent.com/wjpang/World-Happiness-Dashboard/main/data_clean/WHR_data_clean.csv"
    },
    "transform":[
        {
            "lookup":"Country",
            "from":{
                "data":{
                    "url":"https://raw.githubusercontent.com/wjpang/World-Happiness-Dashboard/main/json/ne_110m_admin_0_countries.topo.json",
                    "format":{
                        "type":"topojson",
                        "feature":"ne_110m_admin_0_countries"
                    }
                },
                "key":"properties.NAME"
            },
            "as":"geo"
        },
        {
            "filter":"year(datum.Year) == Year"
        }
    ],
    "mark":{
        "type":"geoshape"
    },
    "encoding":{
        "shape":{
            "field":"geo",
            "type":"geojson"
        },
        "color":{
            "field":"Happiness Score",
            "type":"quantitative"
        },
        "tooltip":[
            {
                "field":"properties.NAME",
                "type":"nominal",
                "title":"Country"
            },
            {
                "field":"Happiness Score",
                "type":"quantitative",
                "format":".2f"
            }
        ]
    }
}